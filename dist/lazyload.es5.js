!function(t){function e(o){if(n[o])return n[o].exports;var module=n[o]={exports:{},id:o,loaded:!1};return t[o].call(module.exports,module,module.exports,e),module.loaded=!0,module.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(module,exports){(function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){for(var e=new Array,n=0,o=t.length;n<o;n++)e.push(t[n]);return e}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",a={},i={on:function(t,e,n){t.addEventListener(e,n)},off:function(t,e,n){t.removeEventListener(e,n)}},u=function(){function t(n){e(this,t),this._VERSIONS="0.1";var o={wrap:document.body,attr:"data-resources",offset:200,watch:!1,error:r,loading:r,state:{loading:"imgloading",loaded:"imgloaded",error:"imgerror"}};a=n||{};for(var i in o)"undefined"==typeof a[i]&&(a[i]=o[i]);"string"==typeof a.wrap&&(a.wrap=document.querySelector(a.wrap)),this.wrap=a.wrap,this.init()}return o(t,[{key:"saveImages",value:function(){this.imgLists=n(document.querySelectorAll("["+a.attr+"]:not(["+a.state.loaded+"])"))||[]}},{key:"_loadImage",value:function(t,e,n){var o=new Image;o.src=t.getAttribute(a.attr),o.onload=function(){e&&e(t)},o.onerror=function(){n&&n(t)}}},{key:"_imgPosition",value:function(t,e){var n=this.wrap,o=n==document.body?document.documentElement.clientHeight:n.clientHeight,r=n.getBoundingClientRect().top,i=t.getBoundingClientRect().top;n==document.body&&i<=o+a.offset?e&&e(t):i-r<=o+a.offset&&e&&e(t)}},{key:"_loadAllImage",value:function(){var t=this;a.watch&&this.saveImages();for(var e=this.imgLists,n=0,o=e.length;n<o;n++)this._imgPosition(e[n],function(e){e.setAttribute(a.state.loading,""),e.setAttribute("src",a.loading),t._loadImage(e,function(n){e.setAttribute("src",n.getAttribute(a.attr)),e.removeAttribute(a.state.loading),e.setAttribute(a.state.loaded,""),t.saveImages()},function(t){e.setAttribute("src",a.error),e.removeAttribute(a.state.loading),e.setAttribute(a.state.error,"")})})}},{key:"init",value:function(){var t=this,e=t.wrap;e==document.body&&(e=window),t.saveImages(),t._loadAllImage(),i.on(e,"scroll",function(){t._loadAllImage()}),i.on(e,"resize",function(){t._loadAllImage()})}},{key:"refresh",value:function(){this._loadAllImage()}}]),t}();exports["default"]=u,t.Lazyload=u}).call(exports,function(){return this}())}]);